Class {
	#name : #ReHabBird,
	#superclass : #CMAgent,
	#traits : 'TCMLocated',
	#classTraits : 'TCMLocated classTrait',
	#instVars : [
		'mySpaceUnits',
		'isAdult'
	],
	#classInstVars : [
		'habitatSuitabilityThreshold'
	],
	#category : #'ReHab-Model'
}

{ #category : #accessing }
ReHabBird class >> BitmapPOV_adult [
"Returns an array containing the settings of a Situated entity bitmap pov symbol in the following order:
(position)
The bitmap itself corresponding to the symbol is in the selector #adultBitmapImage"
^Array with: #random
]

{ #category : #accessing }
ReHabBird class >> BitmapPOV_chicken [
"Returns an array containing the settings of a Situated entity bitmap pov symbol in the following order:
(position)
The bitmap itself corresponding to the symbol is in the selector #chickenBitmapImage"
^Array with: #random
]

{ #category : #image }
ReHabBird class >> defaultImage [
"defaultImage adapted for Cormas versions previous to 2010. Returns a copy of the POV image stored in the povDict of the class at a specifed symbol key"
^((self povDict keys includes: #Animal) ifTrue:[self povDict at:#Animal] ifFalse:[super defaultImage]) copy
]

{ #category : #accessing }
ReHabBird class >> entityName [ 

	^ 'Bird'
]

{ #category : #accessing }
ReHabBird class >> habitatSuitabilityThreshold [
	"Getter accessor with default value = 2 "
	^habitatSuitabilityThreshold ifNil:[habitatSuitabilityThreshold := 2]
]

{ #category : #accessing }
ReHabBird class >> habitatSuitabilityThreshold: anObject [
	habitatSuitabilityThreshold := anObject
]

{ #category : #accessing }
ReHabBird class >> habitatSuitabilityThreshold_default [
	"Return the default value of habitatSuitabilityThreshold attribute"
	^2
]

{ #category : #accessing }
ReHabBird class >> mySpaceUnits_default [
	"Return the default value of mySpaceUnits attribute"
	^nil
]

{ #category : #accessing }
ReHabBird class >> status_type [
	"Return the type of attribute #status.
	!!!! This method was automatically generated by Cormas !!!!"

	^ByteSymbol
]

{ #category : #initialization }
ReHabBird >> initialize [

	super initialize.
	isAdult := true.
]

{ #category : #accessing }
ReHabBird >> isAdult [

	^ isAdult
]

{ #category : #accessing }
ReHabBird >> isAdult: anObject [

	isAdult := anObject
]

{ #category : #pov }
ReHabBird >> pov [

	^ self isAdult
		ifTrue: [ Color yellow ]
		ifFalse: [ Color orange ]
]

{ #category : #control }
ReHabBird >> reproduce [
| nbQuietNeighbours ratio newBorn chicks |
	chicks := Set new.
	self patch hasHarvesters
		ifFalse:
			[nbQuietNeighbours := (self patch neighbourhood
				reject: [:z | z hasHarvesters ]) size.
			ratio := (nbQuietNeighbours / self patch neighbourhood size) asFloat.
			ratio > 0.5
				ifTrue:
					[newBorn := self newEntity: self class.
					newBorn isAdult: false.
					newBorn moveTo: self patch.
					chicks add: newBorn].
			ratio >= 0.8
				ifTrue:
					[newBorn := self newEntity: self class.
					newBorn isAdult: false.
					newBorn moveTo: self patch.
					chicks add: newBorn]].
	^chicks
]

{ #category : #accessing }
ReHabBird >> zone [
^ self patch myCSE: ReHabCell
]

{ #category : #accessing }
ReHabBird >> zones [
"Getter accessor without default value "

	^ mySpaceUnits
]

{ #category : #accessing }
ReHabBird >> zones: anObject [

	mySpaceUnits := anObject
]
